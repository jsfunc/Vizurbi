(function(){var i=512*1024;var j=zip.TextWriter,s=zip.BlobWriter,v=zip.Data64URIWriter,y=zip.Reader,w=zip.TextReader,a=zip.BlobReader,c=zip.Data64URIReader,r=zip.createReader,g=zip.createWriter;function h(D){var C=this,F;function G(H){this.size=D.uncompressedSize;H()}function B(H){if(C.data){H()}else{D.getData(new s(),function(I){C.data=I;F=new a(I);H()},null,C.checkCrc32)}}function E(I,J,K,H){B(function(){F.readUint8Array(I,J,K,H)},H)}C.size=0;C.init=G;C.readUint8Array=E}h.prototype=new y();h.prototype.constructor=h;h.prototype.checkCrc32=false;function t(C){var B=0;function D(E){B+=E.uncompressedSize||0;E.children.forEach(D)}D(C);return B}function m(E,F,B){var C=0;function D(){C++;if(C<E.children.length){G(E.children[C])}else{F()}}function G(H){if(H.directory){m(H,D,B)}else{H.reader=new H.Reader(H.data,B);H.reader.init(function(){H.uncompressedSize=H.reader.size;D()})}}if(E.children.length){G(E.children[C])}else{F()}}function z(C){var B=C.parent.children;B.forEach(function(E,D){if(E.id==C.id){B.splice(D,1)}})}function n(D,E,G,F,C){var B=0;function H(K,L,N,M,I){var O=0;function J(){var P=L.children[O];if(P){K.add(P.getFullname(),P.reader,function(){B+=P.uncompressedSize||0;H(K,P,function(){O++;J()},M,I)},function(Q){if(M){M(B+Q,I)}},{directory:P.directory,version:P.zipVersion})}else{N()}}J()}H(D,E,G,F,C)}function q(E,G,C,B){function F(I,H){if(I.isDirectory){I.createReader().readEntries(H)}if(I.isFile){H([])}}function D(I,J,H){F(J,function(K){var N=0;function M(P){function O(Q){D(Q,P,function(){N++;L()})}if(P.isDirectory){O(I.addDirectory(P.name))}if(P.isFile){P.file(function(R){var Q=I.addBlob(P.name,R);Q.uncompressedSize=R.size;O(Q)},B)}}function L(){var O=K[N];if(O){M(O)}else{H()}}L()})}if(G.isDirectory){D(E,G,C)}else{G.file(function(H){E.addBlob(G.name,H);C()},B)}}function A(E,H,J,D,G,I,B){var F=0;function C(N,Q,S,L,P,R){var M=0;function O(U){function T(V){F+=U.uncompressedSize||0;C(V,U,function(){M++;K()},L,P,R)}if(U.directory){N.getDirectory(U.name,{create:true},T,P)}else{N.getFile(U.name,{create:true},function(V){U.getData(new zip.FileWriter(V,zip.getMimeType(U.name)),T,function(W){if(L){L(F+W,R)}},B)},P)}}function K(){var T=Q.children[M];if(T){O(T)}else{S()}}K()}if(H.directory){C(E,H,J,D,G,I)}else{H.getData(new zip.FileWriter(E,zip.getMimeType(H.name)),J,D,B)}}function p(B){B.entries=[];B.root=new u(B)}function k(C,H,G,F,B){var D=0;function E(){var I=D*i;if(F){F(I,C.size)}if(I<C.size){C.readUint8Array(I,Math.min(i,C.size-I),function(J){H.writeUint8Array(new Uint8Array(J),function(){D++;E()})},B)}else{H.getData(G)}}E()}function l(F,E,D,B){var C=this;if(!F||(F.constructor==C.Writer&&C.data)){E(C.data)}else{if(!C.reader){C.reader=new C.Reader(C.data,B)}C.reader.init(function(){F.init(function(){k(C.reader,F,E,D,B)},B)})}}function d(D,C,E,B){if(D.directory){return B?new u(D.fs,C,E,D):new x(D.fs,C,E,D)}else{throw"Parent entry is not a directory."}}function f(){}f.prototype={init:function(B,C,F,D){var E=this;if(B.root&&D&&D.getChildByName(C)){throw"Entry filename already exists."}if(!F){F={}}E.fs=B;E.name=C;E.id=B.entries.length;E.parent=D;E.children=[];E.zipVersion=F.zipVersion||20;E.uncompressedSize=0;B.entries.push(E);if(D){E.parent.children.push(E)}},getFileEntry:function(G,F,E,B,C){var D=this;m(D,function(){A(G,D,F,E,B,t(D),C)},B)},moveTo:function(C){var B=this;if(C.directory){if(!C.isDescendantOf(B)){if(B!=C){if(C.getChildByName(B.name)){throw"Entry filename already exists."}z(B);B.parent=C;C.children.push(B)}}else{throw"Entry is a ancestor of target entry."}}else{throw"Target entry is not a directory."}},getFullname:function(){var D=this,B=D.name,C=D.parent;while(C){B=(C.name?C.name+"/":"")+B;C=C.parent}return B},isDescendantOf:function(B){var C=this.parent;while(C&&C.id!=B.id){C=C.parent}return !!C}};f.prototype.constructor=f;var o;function x(B,C,F,D){var E=this;f.prototype.init.call(E,B,C,F,D);E.Reader=F.Reader;E.Writer=F.Writer;E.data=F.data;E.getData=F.getData||l}x.prototype=o=new f();o.constructor=x;o.getText=function(E,D,B,C){this.getData(new j(C),E,D,B)};o.getBlob=function(E,D,C,B){this.getData(new s(E),D,C,B)};o.getData64URI=function(E,D,C,B){this.getData(new v(E),D,C,B)};var e;function u(B,C,F,D){var E=this;f.prototype.init.call(E,B,C,F,D);E.directory=true}u.prototype=e=new f();e.constructor=u;e.addDirectory=function(B){return d(this,B,null,true)};e.addText=function(B,C){return d(this,B,{data:C,Reader:w,Writer:j})};e.addBlob=function(C,B){return d(this,C,{data:B,Reader:a,Writer:s})};e.addData64URI=function(C,B){return d(this,C,{data:B,Reader:c,Writer:v})};e.addFileEntry=function(D,C,B){q(this,D,C,B)};e.addData=function(B,C){return d(this,B,C)};e.importBlob=function(C,D,B){this.importZip(new a(C),D,B)};e.importText=function(D,C,B){this.importZip(new w(D),C,B)};e.importData64URI=function(C,D,B){this.importZip(new c(C),D,B)};e.exportBlob=function(D,C,B){this.exportZip(new s("application/zip"),D,C,B)};e.exportText=function(D,C,B){this.exportZip(new j(),D,C,B)};e.exportFileEntry=function(E,D,C,B){this.exportZip(new zip.FileWriter(E,"application/zip"),D,C,B)};e.exportData64URI=function(D,C,B){this.exportZip(new v("application/zip"),D,C,B)};e.importZip=function(C,E,B){var D=this;r(C,function(F){F.getEntries(function(G){G.forEach(function(J){var I=D,K=J.filename.split("/"),H=K.pop();K.forEach(function(L){I=I.getChildByName(L)||new u(D.fs,L,null,I)});if(!J.directory){d(I,H,{data:J,Reader:h})}});E()})},B)};e.exportZip=function(F,E,D,B){var C=this;m(C,function(){g(F,function(G){n(G,C,function(){G.close(E)},D,t(C))},B)},B)};e.getChildByName=function(B){var E,D,C=this;for(E=0;E<C.children.length;E++){D=C.children[E];if(D.name==B){return D}}};function b(){p(this)}b.prototype={remove:function(B){z(B);this.entries[B.id]=null},find:function(B){var C,E=B.split("/"),D=this.root;for(C=0;D&&C<E.length;C++){D=D.getChildByName(E[C])}return D},getById:function(B){return this.entries[B]},importBlob:function(C,D,B){p(this);this.root.importBlob(C,D,B)},importText:function(D,C,B){p(this);this.root.importText(D,C,B)},importData64URI:function(C,D,B){p(this);this.root.importData64URI(C,D,B)},exportBlob:function(D,C,B){this.root.exportBlob(D,C,B)},exportText:function(D,C,B){this.root.exportText(D,C,B)},exportFileEntry:function(E,D,C,B){this.root.exportFileEntry(E,D,C,B)},exportData64URI:function(D,C,B){this.root.exportData64URI(D,C,B)}};zip.fs={FS:b,ZipDirectoryEntry:u,ZipFileEntry:x};zip.getMimeType=function(){return"application/octet-stream"}})();