var tinf;function JSUnzip(){this.getInt=function(b,a){switch(a){case 4:return(this.data.charCodeAt(b+3)&255)<<24|(this.data.charCodeAt(b+2)&255)<<16|(this.data.charCodeAt(b+1)&255)<<8|(this.data.charCodeAt(b+0)&255);break;case 2:return(this.data.charCodeAt(b+1)&255)<<8|(this.data.charCodeAt(b+0)&255);break;default:return this.data.charCodeAt(b)&255;break}};this.getDOSDate=function(f,b){var a=f&31;var e=((f>>5)&15)-1;var d=1980+((f>>9)&127);var c=(b&31)*2;var g=(b>>5)&63;hour=(b>>11)&31;return new Date(d,e,a,hour,g,c)};this.open=function(x){this.data=x;this.files=[];if(this.data.length<22){return{status:false,error:"Invalid data"}}var o=this.data.length-22;while(o>=0&&this.getInt(o,4)!=101010256){--o}if(o<0){return{status:false,error:"Invalid data"}}if(this.getInt(o+4,2)!=0||this.getInt(o+6,2)!=0){return{status:false,error:"No multidisk support"}}var q=this.getInt(o+8,2);var g=this.getInt(o+16,4);var m=this.getInt(o+20,2);this.comment=this.data.slice(o+22,o+22+m);var s=g;for(var p=0;p<q;++p){if(this.getInt(s+0,4)!=33639248){return{status:false,error:"Invalid data"}}if(this.getInt(s+6,2)>20){return{status:false,error:"Unsupported version"}}if(this.getInt(s+8,2)&1){return{status:false,error:"Encryption not implemented"}}var l=this.getInt(s+10,2);if(l!=0&&l!=8){return{status:false,error:"Unsupported compression method"}}var c=this.getInt(s+12,2);var n=this.getInt(s+14,2);var t=this.getDOSDate(n,c);var k=this.getInt(s+16,4);var d=this.getInt(s+20,4);var h=this.getInt(s+24,4);var u=this.getInt(s+28,2);var v=this.getInt(s+30,2);var a=this.getInt(s+32,2);var e=this.getInt(s+42,4);var w=this.data.slice(s+46,s+46+u);var b=this.data.slice(s+46+u+v,s+46+u+v+a);if(this.getInt(e+0,4)!=67324752){return{status:false,error:"Invalid data"}}var j=this.getInt(e+26,2);var f=this.getInt(e+28,2);var r=e+30+j+f;this.files[w]={fileComment:b,compressionMethod:l,compressedSize:d,uncompressedSize:h,localFileContent:r,lastModifiedDate:t};s+=46+u+v+a}return{status:true}};this.read=function(c){var b=this.files[c];if(b){if(b.compressionMethod==8){if(!tinf){tinf=new TINF();tinf.init()}var a=tinf.uncompress(this.data,b.localFileContent);if(a.status==tinf.OK){return{status:true,data:a.data}}else{return{status:false,error:a.error}}}else{return{status:true,data:this.data.slice(b.localFileContent,b.localFileContent+b.uncompressedSize)}}}return{status:false,error:"File '"+c+"' doesn't exist in zip"}}}function TINF(){this.OK=0;this.DATA_ERROR=(-3);this.TREE=function(){this.table=new Array(16);this.trans=new Array(288)};this.DATA=function(a){this.source="";this.sourceIndex=0;this.tag=0;this.bitcount=0;this.dest=[];this.ltree=new a.TREE();this.dtree=new a.TREE()};this.sltree=new this.TREE();this.sdtree=new this.TREE();this.length_bits=new Array(30);this.length_base=new Array(30);this.dist_bits=new Array(30);this.dist_base=new Array(30);this.clcidx=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];this.build_bits_base=function(d,c,f,e){var a,b;for(a=0;a<f;++a){d[a]=0}for(a=0;a<30-f;++a){d[a+f]=Math.floor(a/f)}for(b=e,a=0;a<30;++a){c[a]=b;b+=1<<d[a]}};this.build_fixed_trees=function(a,c){var b;for(b=0;b<7;++b){a.table[b]=0}a.table[7]=24;a.table[8]=152;a.table[9]=112;for(b=0;b<24;++b){a.trans[b]=256+b}for(b=0;b<144;++b){a.trans[24+b]=b}for(b=0;b<8;++b){a.trans[24+144+b]=280+b}for(b=0;b<112;++b){a.trans[24+144+8+b]=144+b}for(b=0;b<5;++b){c.table[b]=0}c.table[5]=32;for(b=0;b<32;++b){c.trans[b]=b}};this.build_tree=function(c,g,f,a){var e=new Array(16);var b,d;for(b=0;b<16;++b){c.table[b]=0}for(b=0;b<a;++b){c.table[g[f+b]]++}c.table[0]=0;for(d=0,b=0;b<16;++b){e[b]=d;d+=c.table[b]}for(b=0;b<a;++b){if(g[f+b]){c.trans[e[g[f+b]]++]=b}}};this.getbit=function(b){var a;if(!b.bitcount--){b.tag=b.source.charCodeAt(b.sourceIndex++)&255;b.bitcount=7}a=b.tag&1;b.tag>>=1;return a};this.read_bits=function(e,a,b){if(!a){return b}var c=0;while(e.bitcount<24){e.tag=e.tag|(e.source.charCodeAt(e.sourceIndex++)&255)<<e.bitcount;e.bitcount+=8}c=e.tag&(65535>>(16-a));e.tag>>=a;e.bitcount-=a;return c+b};this.decode_symbol=function(f,b){while(f.bitcount<24){f.tag=f.tag|(f.source.charCodeAt(f.sourceIndex++)&255)<<f.bitcount;f.bitcount+=8}var c=0,e=0,a=0;do{e=2*e+((f.tag&(1<<a))>>a);++a;c+=b.table[a];e-=b.table[a]}while(e>=0);f.tag>>=a;f.bitcount-=a;return b.trans[c+e]};this.decode_trees=function(j,f,c){var o=new this.TREE();lengths=new Array(288+32);var n,k,l;var g,h,b;n=this.read_bits(j,5,257);k=this.read_bits(j,5,1);l=this.read_bits(j,4,4);for(g=0;g<19;++g){lengths[g]=0}for(g=0;g<l;++g){var m=this.read_bits(j,3,0);lengths[this.clcidx[g]]=m}this.build_tree(o,lengths,0,19);for(h=0;h<n+k;){var a=this.decode_symbol(j,o);switch(a){case 16:var e=lengths[h-1];for(b=this.read_bits(j,2,3);b;--b){lengths[h++]=e}break;case 17:for(b=this.read_bits(j,3,3);b;--b){lengths[h++]=0}break;case 18:for(b=this.read_bits(j,7,11);b;--b){lengths[h++]=0}break;default:lengths[h++]=a;break}}this.build_tree(f,lengths,0,n);this.build_tree(c,lengths,n,k)};this.inflate_block_data=function(h,f,b){var a=h.dest;var l=a.length;while(1){var e=this.decode_symbol(h,f);if(e==256){return this.OK}if(e<256){a[l++]=String.fromCharCode(e)}else{var c,j,k;var g;e-=257;c=this.read_bits(h,this.length_bits[e],this.length_base[e]);j=this.decode_symbol(h,b);k=l-this.read_bits(h,this.dist_bits[j],this.dist_base[j]);for(g=k;g<k+c;++g){a[l++]=a[g]}}}};this.inflate_uncompressed_block=function(e){var b,c;var a;b=e.source[e.sourceIndex+1];b=256*b+e.source[e.sourceIndex];c=e.source[e.sourceIndex+3];c=256*c+e.source[e.sourceIndex+2];if(b!=(~c&65535)){return this.DATA_ERROR}e.sourceIndex+=4;for(a=b;a;--a){e.dest[e.dest.length]=e.source[e.sourceIndex++]}e.bitcount=0;return this.OK};this.inflate_fixed_block=function(a){return this.inflate_block_data(a,this.sltree,this.sdtree)};this.inflate_dynamic_block=function(a){this.decode_trees(a,a.ltree,a.dtree);return this.inflate_block_data(a,a.ltree,a.dtree)};this.init=function(){this.build_fixed_trees(this.sltree,this.sdtree);this.build_bits_base(this.length_bits,this.length_base,4,3);this.build_bits_base(this.dist_bits,this.dist_base,2,1);this.length_bits[28]=0;this.length_base[28]=258};this.uncompress=function(c,f){var e=new this.DATA(this);var a;e.source=c;e.sourceIndex=f;e.bitcount=0;e.dest=[];do{var g;var b;a=this.getbit(e);g=this.read_bits(e,2,0);switch(g){case 0:b=this.inflate_uncompressed_block(e);break;case 1:b=this.inflate_fixed_block(e);break;case 2:b=this.inflate_dynamic_block(e);break;default:return{status:this.DATA_ERROR}}if(b!=this.OK){return{status:this.DATA_ERROR}}}while(!a);e.dest=e.dest.join("");return{status:this.OK,data:e.dest}}};